<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thuật Toán AI - Xổ Số 3 Miền</title>
    <link rel="icon" href="lottery.png" type="image/png">
    <style>
        /* CSS giữ nguyên như trước */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .container {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 800px;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        .input-section {
            margin-bottom: 20px;
        }
        .input-section label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        .input-section input, .input-section select {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .btn {
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .btn:hover {
            background-color: #45a049;
        }
        .output-section {
            margin-top: 20px;
            display: none;
        }
        .loading {
            text-align: center;
            font-size: 16px;
            color: #888;
        }
        .result-section {
            margin-top: 20px;
        }
        .result-section h2 {
            color: #333;
        }
        .result-section p {
            margin: 5px 0;
            word-wrap: break-word;
        }
        #spinNotice {
            color: red;
            text-align: center;
            display: none;
        }
        .copy-btn {
            padding: 5px 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 10px;
        }
        .copy-btn:hover {
            background-color: #0056b3;
        }
        .copy-btn:active {
            background-color: #003f7f;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>AI Xổ Số Miền Bắc Trung Nam</h1>
    <div class="input-section">
        <label for="simulations">Số phiên chạy tần suất:</label>
        <input type="number" id="simulations" placeholder="Nhập số phiên chạy" min="1">
        <label for="region">Chọn miền:</label>
        <select id="region">
            <option value="Miền Bắc">Xổ Số Miền Bắc - 27 Lần</option>
            <option value="Miền Trung">Xổ Số Miền Trung - 18 Lần</option>
            <option value="Miền Nam">Xổ Số Miền Nam - 18 Lần</option>
        </select>
        <label for="province">Chọn đài xổ số:</label>
        <select id="province"></select>
    </div>
    <button class="btn" id="startSimulation">Lấy Kết Quả</button>
    <div id="spinNotice">Bạn đã quay hôm nay rồi. Hãy quay lại vào ngày mai!</div>
    <div class="output-section" id="output">
        <div class="loading" id="loading">Đang chạy mô phỏng, vui lòng chờ...</div>
        <div class="result-section" id="result"></div>
    </div>
    <button class="btn" id="homeButton">Trang Chủ</button>
</div>
<script>
    // Danh sách các đài xổ số cho từng miền
    const provinces = {
        "Miền Bắc": ["Truyền Thống", "Hà Nội", "Thái Bình", "Bắc Ninh", "Hải Phòng", "Nam Định", "Quảng Ninh"],
        "Miền Trung": ["Kon Tum", "Khánh Hòa", "Phú Yên", "Thừa Thiên Huế", "Đắk Lắk", "Quảng Nam", "Bình Định", "Quảng Bình", "Quảng Trị", "Gia Lai", "Ninh Thuận", "Đà Nẵng", "Đắk Nông", "Quảng Ngãi"],
        "Miền Nam": ["TP.HCM", "Kiên Giang", "Lâm Đồng", "Tiền Giang", "Cà Mau", "Đồng Tháp", "Bạc Liêu", "Bến Tre", "Vũng Tàu", "Cần Thơ", "Sóc Trăng", "An Giang", "Bình Dương", "Trà Vinh", "Tây Ninh", "Bình Thuận", "Bình Phước", "Vĩnh Long", "Hậu Giang", "Long An", "Đồng Nai"]
    };

    // Lưu lịch sử quay số
    const spinRecords = JSON.parse(localStorage.getItem("spinRecords")) || {};

    // Cập nhật danh sách đài khi chọn miền
    document.getElementById('region').addEventListener('change', (event) => {
        const provinceSelect = document.getElementById('province');
        provinceSelect.innerHTML = '';
        const selectedRegion = event.target.value;
        provinces[selectedRegion].forEach((province) => {
            const option = document.createElement('option');
            option.value = province;
            option.text = province;
            provinceSelect.appendChild(option);
        });
    });

    // Hàm kiểm tra xem đài đã quay chưa
    const hasSpunToday = (province) => {
        const today = new Date().toDateString();
        return spinRecords[province] === today;
    };

    // Hàm lưu kết quả quay vào localStorage
    const saveSpinRecord = (province) => {
        const today = new Date().toDateString();
        spinRecords[province] = today;
        localStorage.setItem("spinRecords", JSON.stringify(spinRecords));
    };

    // Xử lý khi bấm "Lấy Kết Quả"
    document.getElementById('startSimulation').addEventListener('click', () => {
        const simulations = parseInt(document.getElementById('simulations').value, 10);
        const province = document.getElementById('province').value;

        if (!simulations || simulations <= 0) {
            alert('Vui lòng nhập số phiên chạy hợp lệ!');
            return;
        }
        if (!province) {
            alert('Vui lòng chọn đài xổ số!');
            return;
        }

        if (hasSpunToday(province)) {
            document.getElementById('spinNotice').style.display = 'block';
            return;
        }

        document.getElementById('spinNotice').style.display = 'none';
        document.getElementById('loading').style.display = 'block';
        document.getElementById('result').innerHTML = '';

        setTimeout(() => {
            const results = monteCarloSimulation(simulations);
            displayResults(results, province);
            saveSpinRecord(province);
            document.getElementById('loading').style.display = 'none';
            document.getElementById('output').style.display = 'block';
        }, 1000);
    });

    // Khởi tạo danh sách đài theo miền mặc định
    document.getElementById('region').dispatchEvent(new Event('change'));

    // Hàm mô phỏng quay số (giữ nguyên logic)
    const monteCarloSimulation = (iterations) => {
        // Logic mô phỏng
    };

    const displayResults = (results, province) => {
        // Logic hiển thị kết quả
    };
</script>
</body>
</html>
