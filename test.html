<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phân bổ dữ liệu XSMB</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        .title {
            font-size: 24px;
            margin-top: 30px;
            text-align: center;
        }
        .sub-title {
            font-size: 20px;
            margin-top: 30px;
        }
    </style>
</head>
<body>

    <div id="content">
        <h1 class="title">Phân bổ dữ liệu XSMB</h1>

        <!-- Bảng Giải Thưởng -->
        <div class="sub-title">Giải thưởng:</div>
        <table id="prizes">
            <thead>
                <tr>
                    <th>Giải</th>
                    <th>Giá trị</th>
                </tr>
            </thead>
            <tbody>
                <!-- Dữ liệu sẽ được chèn vào đây -->
            </tbody>
        </table>

        <!-- Lô Tô Trực Tiếp -->
        <div class="sub-title">Lô tô trực tiếp:</div>
        <table id="lottery-direct">
            <thead>
                <tr>
                    <th>Con số</th>
                    <th>Giá trị</th>
                </tr>
            </thead>
            <tbody>
                <!-- Dữ liệu sẽ được chèn vào đây -->
            </tbody>
        </table>

        <!-- Đầu Lô Tô -->
        <div class="sub-title">Đầu Lô Tô:</div>
        <table id="lottery-head">
            <thead>
                <tr>
                    <th>Đầu</th>
                    <th>Lô tô</th>
                </tr>
            </thead>
            <tbody>
                <!-- Dữ liệu sẽ được chèn vào đây -->
            </tbody>
        </table>

        <!-- Đuôi Lô Tô -->
        <div class="sub-title">Đuôi Lô Tô:</div>
        <table id="lottery-tail">
            <thead>
                <tr>
                    <th>Đuôi</th>
                    <th>Lô tô</th>
                </tr>
            </thead>
            <tbody>
                <!-- Dữ liệu sẽ được chèn vào đây -->
            </tbody>
        </table>
    </div>

    <script>
        // Hàm tải dữ liệu từ CSV
        function loadData() {
            fetch('https://raw.githubusercontent.com/LEDO-DEV-SITE-OSCAR/API_XSMB/refs/heads/main/data/xsmb.csv')
                .then(response => response.text())
                .then(csv => {
                    // Chuyển đổi dữ liệu CSV thành mảng
                    const rows = csv.split('\n').map(row => row.split(','));

                    // Chèn dữ liệu vào các bảng
                    populatePrizes(rows);
                    populateLotteryDirect(rows);
                    populateLotteryHeadTail(rows);
                });
        }

        // Hàm phân bổ dữ liệu giải thưởng
        function populatePrizes(rows) {
            const prizeTable = document.getElementById('prizes').getElementsByTagName('tbody')[0];
            const prizes = [
                { name: 'Đặc biệt', index: 0 },
                { name: 'Giải nhất', index: 1 },
                { name: 'Giải nhì', index: 2 },
                { name: 'Giải ba', index: 3 },
                { name: 'Giải tư', index: 4 },
                { name: 'Giải năm', index: 5 },
                { name: 'Giải sáu', index: 6 },
                { name: 'Giải bảy', index: 7 }
            ];

            prizes.forEach(prize => {
                const row = prizeTable.insertRow();
                const cell1 = row.insertCell(0);
                const cell2 = row.insertCell(1);

                cell1.textContent = prize.name;
                cell2.textContent = rows[prize.index][0]; // Lấy giá trị từ cột dữ liệu
            });
        }

        // Hàm phân bổ lô tô trực tiếp
        function populateLotteryDirect(rows) {
            const lotteryDirectTable = document.getElementById('lottery-direct').getElementsByTagName('tbody')[0];
            const lotteryDirect = rows[8]; // Giả sử lô tô trực tiếp nằm ở hàng thứ 9

            lotteryDirect.forEach(value => {
                const row = lotteryDirectTable.insertRow();
                const cell1 = row.insertCell(0);
                const cell2 = row.insertCell(1);

                cell1.textContent = value;
                cell2.textContent = value;
            });
        }

        // Hàm phân bổ đầu và đuôi lô tô
        function populateLotteryHeadTail(rows) {
            const lotteryHeadTable = document.getElementById('lottery-head').getElementsByTagName('tbody')[0];
            const lotteryTailTable = document.getElementById('lottery-tail').getElementsByTagName('tbody')[0];

            const heads = rows.slice(1, 11);  // Giả sử đầu lô tô nằm từ hàng 1 đến 10
            const tails = rows.slice(11, 21); // Giả sử đuôi lô tô nằm từ hàng 11 đến 20

            // Chèn dữ liệu đầu
            heads.forEach((item, index) => {
                const row = lotteryHeadTable.insertRow();
                const cell1 = row.insertCell(0);
                const cell2 = row.insertCell(1);

                cell1.textContent = index;  // Đầu từ 0 đến 9
                cell2.textContent = item.join('; ');
            });

            // Chèn dữ liệu đuôi
            tails.forEach((item, index) => {
                const row = lotteryTailTable.insertRow();
                const cell1 = row.insertCell(0);
                const cell2 = row.insertCell(1);

                cell1.textContent = index;  // Đuôi từ 0 đến 9
                cell2.textContent = item.join('; ');
            });
        }

        // Tải dữ liệu khi trang được tải
        window.onload = loadData;
    </script>

</body>
</html>
