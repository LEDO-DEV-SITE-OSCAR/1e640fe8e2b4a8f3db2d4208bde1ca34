<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phân bổ dữ liệu XSMB</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #000;
        }
        th, td {
            padding: 8px;
            text-align: left;
        }
        .section-title {
            font-size: 1.5em;
            margin-top: 20px;
            text-decoration: underline;
        }
    </style>
</head>
<body>

    <h1>Phân bổ dữ liệu XSMB</h1>

    <div class="section-title">Giải thưởng:</div>
    <table id="prizes-table">
        <tr>
            <th>Giải</th>
            <th>Giá trị</th>
        </tr>
    </table>

    <div class="section-title">Lô tô trực tiếp:</div>
    <table id="lotto-direct">
        <tr>
            <th>Con số</th>
        </tr>
    </table>

    <div class="section-title">Đầu Lô Tô:</div>
    <table id="lotto-head">
        <tr>
            <th>Đầu</th>
            <th>Lô tô</th>
        </tr>
    </table>

    <div class="section-title">Đuôi Lô Tô:</div>
    <table id="lotto-tail">
        <tr>
            <th>Đuôi</th>
            <th>Lô tô</th>
        </tr>
    </table>

    <script>
        async function fetchData() {
            const url = 'https://raw.githubusercontent.com/LEDO-DEV-SITE-OSCAR/API_XSMB/refs/heads/main/data/xsmb.csv';
            const response = await fetch(url);
            const data = await response.text();
            parseData(data);
        }

        function parseData(data) {
            const rows = data.split('\n').map(row => row.split(','));
            
            const prizes = {
                'Đặc biệt': rows[0][0],
                'Giải nhất': rows[0][1],
                'Giải nhì': rows[0][2],
                'Giải ba': rows[0][3],
                'Giải tư': rows[0][4],
                'Giải năm': rows[0][5],
                'Giải sáu': rows[0][6],
                'Giải bảy': rows[0][7]
            };

            // Hiển thị giải thưởng
            const prizeTable = document.getElementById('prizes-table');
            for (const [prize, value] of Object.entries(prizes)) {
                const row = document.createElement('tr');
                const cell1 = document.createElement('td');
                cell1.textContent = prize;
                const cell2 = document.createElement('td');
                cell2.textContent = value;
                row.appendChild(cell1);
                row.appendChild(cell2);
                prizeTable.appendChild(row);
            }

            // Lô tô trực tiếp
            const lottoDirect = rows[0].slice(8);
            const lottoTable = document.getElementById('lotto-direct');
            lottoDirect.forEach(num => {
                const row = document.createElement('tr');
                const cell = document.createElement('td');
                cell.textContent = num;
                row.appendChild(cell);
                lottoTable.appendChild(row);
            });

            // Đầu Lô tô
            const lottoHead = {};
            rows.forEach(row => {
                const head = row[0];
                const numbers = row.slice(8).join('; ');
                if (!lottoHead[head]) {
                    lottoHead[head] = [];
                }
                lottoHead[head].push(numbers);
            });

            const headTable = document.getElementById('lotto-head');
            Object.entries(lottoHead).forEach(([head, numbers]) => {
                const row = document.createElement('tr');
                const cell1 = document.createElement('td');
                cell1.textContent = head;
                const cell2 = document.createElement('td');
                cell2.textContent = numbers.join('; ');
                row.appendChild(cell1);
                row.appendChild(cell2);
                headTable.appendChild(row);
            });

            // Đuôi Lô tô
            const lottoTail = {};
            rows.forEach(row => {
                const tail = row[1];
                const numbers = row.slice(8).join('; ');
                if (!lottoTail[tail]) {
                    lottoTail[tail] = [];
                }
                lottoTail[tail].push(numbers);
            });

            const tailTable = document.getElementById('lotto-tail');
            Object.entries(lottoTail).forEach(([tail, numbers]) => {
                const row = document.createElement('tr');
                const cell1 = document.createElement('td');
                cell1.textContent = tail;
                const cell2 = document.createElement('td');
                cell2.textContent = numbers.join('; ');
                row.appendChild(cell1);
                row.appendChild(cell2);
                tailTable.appendChild(row);
            });
        }

        // Gọi hàm khi tải trang
        fetchData();
    </script>

</body>
</html>
