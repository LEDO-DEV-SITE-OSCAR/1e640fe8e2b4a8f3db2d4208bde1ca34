<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kết quả xổ số</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        td, th {
            border: 1px solid #ddd;
            padding: 8px;
        }
        td {
            text-align: left;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        tr:hover {
            background-color: #f1f1f1;
        }
    </style>
</head>
<body>
    <h1>Kết quả xổ số mới nhất</h1>
    <div id="lottery-table"></div>
    <div id="loto-head"></div>
    <div id="loto-tail"></div>

    <script>
        // Bộ dữ liệu giả để kiểm tra nếu không có API
        const dummyData = {
            date: "30-12-2024",
            special: "34071",
            first: "85687",
            second: ["55202", "84467"],
            third: ["64837", "67592", "00433", "10933", "84813", "01310"],
            fourth: ["0808", "8871", "1096", "9171"],
            fifth: ["7562", "8884", "3508", "6484", "5334", "6745"],
            sixth: ["432", "971", "308"],
            seventh: ["98", "95", "90", "11"]
        };

        // Hàm xử lý dữ liệu loto
        function processLotoData(allNumbers) {
            const lotoHead = {}; // Đầu
            const lotoTail = {}; // Đuôi

            allNumbers.forEach(num => {
                const head = num[0]; // Chữ số đầu tiên
                const tail = num[num.length - 1]; // Chữ số cuối cùng

                // Đầu
                if (!lotoHead[head]) lotoHead[head] = [];
                lotoHead[head].push(num);

                // Đuôi
                if (!lotoTail[tail]) lotoTail[tail] = [];
                lotoTail[tail].push(num);
            });

            return { lotoHead, lotoTail };
        }

        // Hàm hiển thị dữ liệu loto
        function renderLotoTable(lotoData, elementId, title) {
            let html = `<h2>${title}</h2><table><tr><th>Chữ số</th><th>Số lô tô</th></tr>`;
            for (let i = 0; i <= 9; i++) {
                const key = i.toString();
                const numbers = lotoData[key] ? lotoData[key].join("; ") : "-";
                html += `<tr><td>${key}</td><td>${numbers}</td></tr>`;
            }
            html += "</table>";
            document.getElementById(elementId).innerHTML = html;
        }

        // Hàm hiển thị bảng kết quả xổ số
        function renderLotteryTable(data) {
            const tableHTML = `
                <h2>Kết quả xổ số</h2>
                <table>
                    <tr><td>Date (Ngày)</td><td>${data.date}</td></tr>
                    <tr><td>Special (Giải đặc biệt)</td><td>${data.special}</td></tr>
                    <tr><td>First (Giải nhất)</td><td>${data.first}</td></tr>
                    <tr><td>Second (Giải nhì)</td><td>${data.second.join(", ")}</td></tr>
                    <tr><td rowspan="2">Third (Giải ba)</td><td>${data.third.slice(0, 3).join(", ")}</td></tr>
                    <tr><td>${data.third.slice(3).join(", ")}</td></tr>
                    <tr><td>Fourth (Giải tư)</td><td>${data.fourth.join(", ")}</td></tr>
                    <tr><td rowspan="2">Fifth (Giải năm)</td><td>${data.fifth.slice(0, 3).join(", ")}</td></tr>
                    <tr><td>${data.fifth.slice(3).join(", ")}</td></tr>
                    <tr><td>Sixth (Giải sáu)</td><td>${data.sixth.join(", ")}</td></tr>
                    <tr><td>Seventh (Giải bảy)</td><td>${data.seventh.join(", ")}</td></tr>
                </table>
            `;
            document.getElementById("lottery-table").innerHTML = tableHTML;
        }

        // Hàm chính để lấy dữ liệu và hiển thị
        async function main() {
            try {
                // Sử dụng dữ liệu giả (dummyData) nếu không có API thực tế
                const lotteryData = dummyData;

                // Gộp tất cả các số vào một mảng
                const allNumbers = [
                    lotteryData.special,
                    lotteryData.first,
                    ...lotteryData.second,
                    ...lotteryData.third,
                    ...lotteryData.fourth,
                    ...lotteryData.fifth,
                    ...lotteryData.sixth,
                    ...lotteryData.seventh
                ];

                // Xử lý dữ liệu loto
                const { lotoHead, lotoTail } = processLotoData(allNumbers);

                // Hiển thị bảng kết quả xổ số
                renderLotteryTable(lotteryData);

                // Hiển thị bảng loto đầu và đuôi
                renderLotoTable(lotoHead, "loto-head", "Đầu - Lô tô");
                renderLotoTable(lotoTail, "loto-tail", "Đuôi - Lô tô");
            } catch (error) {
                console.error("Lỗi khi xử lý dữ liệu:", error);
            }
        }

        // Gọi hàm chính
        main();
    </script>
</body>
</html>
